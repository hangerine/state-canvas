{
  "plan": [
    {
      "name": "Example Scenario",
      "dialogState": [
        {
          "name": "start",
          "apicallHandlers": [
            {
              "name": "(external_api)search-json",
              "transitionTarget": {
                "dialogState": "process_response"
              }
            }
          ]
        },
        {
          "name": "process_response",
          "intentHandlers": [
            {
              "intent": "search_complete",
              "action": {
                "type": "text",
                "content": "검색이 완료되었습니다."
              },
              "transitionTarget": {
                "dialogState": "end"
              }
            }
          ]
        },
        {
          "name": "end"
        }
      ]
    }
  ],
  "botConfig": {
    "botType": "chatbot"
  },
  "intentMapping": [],
  "multiIntentMapping": [],
  "handlerGroups": [
    {
      "type": "apicall",
      "name": "external_api",
      "baseUrl": "http://localhost:8000/api/v1"
    }
  ],
  "webhooks": [
    {
      "type": "apicall",
      "name": "(external_api)search-json",
      "url": "http://localhost:8000/api/v1/apicall",
      "timeoutInMilliSecond": 5000,
      "retry": 3,
      "headers": {
        "Authorization": "Bearer {$accessToken}",
        "Content-Type": "application/json"
      },
      "formats": {
        "method": "POST",
        "contentType": "application/json",
        "requestTemplate": "{\"sessionId\":\"{$sessionId}\",\"requestId\":\"{$requestId}\",\"query\":\"{$USER_TEXT_INPUT.[0]}\"}",
        "responseProcessing": {},
        "responseMappings": [
          {
            "type": "memory",
            "map": {
              "NLU_INTENT": "$.NLU_INTENT.value",
              "SEARCH_RESULTS": "$.results"
            }
          }
        ],
        "queryParams": [
          {
            "name": "keyword",
            "value": "{$keyword}"
          },
          {
            "name": "page",
            "value": "{$page}"
          },
          {
            "name": "size",
            "value": "20"
          }
        ]
      }
    }
  ],
  "dialogResult": "success"
}
